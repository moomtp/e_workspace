> Algrebra, Set theory可以讓DBMS更加完備, 這也是讓大家這摸多年來信服的原因

本章主旨 ： 如何從高階的ER model對應到relational DB

ER-to-Relational Mappnig Algo.共分成七個步驟 ： 
1. Mapping of Regular Entity Types
2. Mapping of Weak Entity Types
3. Mapping of Binary 1 : 1 Relation Types
4. Mapping of Binary 1 : N Relation Types
5. Mapping of Binary M : N Relation Types
6. Mapping of Multivalued attributes
7. Mapping of N-ary Relatinship Types

這個流程可以看出來是top-down的

>之後提到的normalization是bottun-up的, 如果normalization時發現有問題, 可能是在mapping時有問題產生

 GOALS during Mapping : 
 - Preserve all information
 - Maintain the constraints
 - Minimize null values

###### 1. Mapping of Regular Entity Types
- 將所有entity 都create一個model(除了weak entity)
- 從set of keys中決定primary key(有可能是composite)

###### 2. Mapping of Weak Entity Types
- 對weak entity 做一樣的
- 將indntitfiy relationship寫出來, 並連結到owner
- 因為有relation, 所以要找出foreign key


###### 3. Mapping of Binary 1 : 1 Relation Types
有三種approach
- Foreign key approach : 選出對方的一個attribute並加入到自身的attribue作為foreign key, 另外如果關係有一方是雙線(totoal participate)的話, 則在雙線端加foreign key會比較好, 這種做法可以有效減少null欄位的發生
- Merged relation option : relationship直接合併消失,  如果兩端都是totoal participate的話, 可以懷疑是不是可以將兩個entity合併
- Cross-reference option : 將relation直接獨立出來成新的table(從関連方取出各自的primay key作為attrbute), 在1-1不常用

> 如果在relation上有看到attribute, 在foreign法中該attribute會放到跟foreign在的同一邊, 而corss中則是直接放在relation table中
###### 4. Mapping of Binary 1 : N Relation Types
使用foreign key的approach作為主要的方法, 通常會在n的那一方加入foreign key(referencing)
如果是在1那邊加入的話會變成multi-value attribute(不好)

merge法會出問題, 通常不好用, 新的entity會有一大堆redudent

corss法有時候可以考慮
###### 5. Mapping of Binary M : N Relation Types
不建議用foreign key approach, 會有muti-value的問題

merge也很糟, 超級多redudent

通常會用corss法, 將relation變成table
e.g. {EMPLOYEE, WORKS_ON, PROJECT}
###### 6. Mapping of Multivalued attributes
multivalue的解決方法(雙環), 將multivalue的attribute升格成table, 將多值變成多個tuple

在原本的entity加入foreign key関連上去, 

> foreign不可能有multivalue
###### 7 . Mapping of N-ary Relatinship Types

在多方關係時(e.g. {SUPPLIER, PROJECT, PART}, SUPPLY) 將SUPPLY這個關係升級成table, 取各自的key放入table中

如果有多方有一方是1-1, 可以全部塞到1-1的那邊做merge

 > Hierarcies 的方式對relational DB沒有很好, 通常會用OO來解決



