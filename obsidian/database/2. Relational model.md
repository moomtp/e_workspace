relational data model是一種intermediam data model

特點
- 是從集合論出發構建的
- 是formal的
- 

甚麼是relation
- 像table
- 儲存a set of rows
- row 是tuple
- column是attribute

tuple是用小括號括起來的元素

用來唯一決定tuple的被稱為artificail key or surrogate key 

Schema of Relation
- R(A1, A2, ... An)
- R是relation的名稱
- A1, A2為不同的attribute
example : 
CUSTOMER(Cust-id, Cust-name, Addr, Phone#)

> Tuple : tuple是使用角括號颳起來的, 且前後要照順序放入對應的值
example :  <12353, "Jone", "101 Main St. Atlata, GA", "395-2385">

r(A1, A2,... ,An) 用來表示內容(如value, population ...)被稱為state of Relation


informal vs. Formal Terms : 
- Table -- Relation
- Column Hearder -- Attrbute
- All possible Column Value -- Domain
- Row -- Tuple
- Table  Definition -- Schema of a Relation
- Populated Table -- State of the Relation

Values in a tuple : 
- values是atomic的
- 每個value會對應到R(A1,A2,...An)所等意義好的domain上
- null是可以被允許的但盡量不要太多
- 用t[Ai]的方式存取tuple的第i個元素

##### Constraints
限制條件在一開始就應定義好, 能夠保證未來的延展性
1. Inherent or Implicit Constarints : base on model itself
2. Schema-base or Explicit Constraints : expressed in schema(跟relational model最為相關的) 
3. Application base or semantic constraints : beyond the experssive of the model

Constraint有哪些
- Domain constraints
- Key constraints
- Entity integrity constraints
- Referential integirty constraints
###### Doamin constraint
要定義好tuple的值域, 并且保證所有tuple都要遵守

###### Key constraints
如果有一群的key可以唯一決定某一個data, 則該key of set被稱為superkey(SK)
- r(R)是SK的relation state 
- for any tuples t1, t2 in r(R), t1[SK] != t1[SK]

key of R : 
- A "minimal" superkey (minimal是 local mininum)
>key的constrain比superkey強

example : CAR relation schema : 
- CAR(State, Reg#, SerialNo, Make, Model, Year)
- CAR has two keys:
	- key1 = {State, Reg#}
	- key2 = {SerialNo}
- 兩種key 都可以作為primary key, 設計者自己決定就好, 通常是以set內的key的數量越少越好為原則

intermedium level的時候每個table都必須要有super key, 因此在conceptual level時在ER model中出現的weak entity的情況是不允許的

OPs in database : 
- INSERT
- DELETE
- MODIFY

###### Entity Integrity constrain

如果r(R)中唯一決定tuple的primary key, 所有key的value都不可以是null

###### Referential Integrity constrain
牽涉到関連兩個table時會產生的relation

當今天是R1去關聯R2時, 在R1中需要增加R2的primary key的attribute
此時在R1中R2的primary key被稱為foreign key
R1為referencee, R2為reference
t1[FK] = t2[SK]


![[tempFileForShare_20250716-185143.jpg]]

 用箭頭的方式表現 Referential Integrity constrain, 箭頭從referencee(r1)指向reference(r2)
 如EMPLOYEE work_on DEPARTMENT, 在EMPLOYEE的最後的Dno(department number)為foreign key, 指向DEPARTMENT這個refrence

DEPT_LOCATIONS原本是DEPRATMENT的attr, 但在intermidum level時把它升級成table, 並用foreign key関連回去, Dnumber在DEPT_LOCAIONS為foreign key並且也是primary key

通常在多對多的關係時, 把relation升級成table会是比較好的做法, 如works_ON關係原本是relation的, 在這邊變成table紀錄不同EMPLOYEE在PROJECT的時數(直接記在PROJECT或EMPLOYEE都會炸)

Event trigger : 當發生insert, update等操作時會觸發, 如今天部們內限制在100人, 當insert後發生超過100後就會觸發

有可能單次的update會有一連串的event trigger會連續發生

event trigger亦會檢測DB會不會有違反上述domain, key, referential, entity constraint的問題

INSERT四個都要檢查

DELETE要檢查referential, 因為關聯的另一個entity的tuple也會有需要修改的可能

UPDATE可以看作DELETE完再INSERT

